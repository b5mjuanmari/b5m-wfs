map
	config proj_lib /usr/local/share/proj
	name gipuzkoa_wfs
	status on
	size 600 600
	extent 530000 4740000 610000 4820000
	units meters
	shapepath "/home/data/gpkg2"
	imagecolor 255 255 255
	projection
		"init=epsg:25830"
	end
	outputformat
		name png
		mimetype image/png
		driver agg/png
		extension png
		imagemode rgba
		transparent true
	end
	outputformat
		name "geojson"
		driver "OGR/GEOJSON"
		mimetype "application/json; subtype=geojson"
		formatoption "STORAGE=stream"
		formatoption "FORM=SIMPLE"
	end
	web
		metadata
			ows_enable_request "*"
			wfs_title "Locate"
			wfs_abstract "Locate. The engine used to server is UMN MapServer"
			wfs_keywordlist "Locate WFS/WMS"
			wfs_onlineresource "https://b5mdev/ogc/wfs2/gipuzkoa_wfs?"
			wfs_accessconstraints "https://b5mdev/info/en/legal-information/"
			wfs_srs "EPSG:25830 EPSG:23030 EPSG:4326 EPSG:32630 EPSG:4230 EPSG:900913 EPSG:3857"
			wfs_enable_request "*"
			wfs_getfeature_formatlist "gml,geojson"
			wfs_maxfeatures "10000"
		end
	end

	# 1. m_municipalities
	layer
		name "m_municipalities"
		type polygon
		status on
		connectiontype ogr
		connection "m_municipalities.gpkg"
		data "m_municipalities"
		template "empty"
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Udalerria / Municipio / Municipality"
			wfs_abstract "B5m code M"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 2. s_regions
	layer
		name "s_regions"
		type polygon
		status on
		connectiontype ogr
		connection "s_regions.gpkg"
		data "s_regions"
		template "empty"
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Eskualdea / Comarca / Region"
			wfs_abstract "B5m code S"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 3. d_postaladdresses
	layer
		name "d_postaladdresses"
		type polygon
		status on
		connectiontype ogr
		connection "d_postaladdresses.gpkg"
		data "d_postaladdresses"
		template "empty"
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Posta helbidea / Dirección postal / Postal Address"
			wfs_abstract "B5m code D"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 4. e_buildings
	layer
		name "e_buildings"
		type polygon
		status on
		connectiontype ogr
		connection "e_buildings.gpkg"
		data "e_buildings"
		template "empty"
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Eraikina / Edificio / Building"
			wfs_abstract "B5m code E"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 5. k_streets_buildings
	layer
		name "k_streets_buildings"
		type polygon
		status on
		connectiontype ogr
		connection "k_streets_buildings.gpkg"
		data "k_streets_buildings"
		template "empty"
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Kalea (eraikin multzoa) / Calle (conjunto de edificios) / Street (building set)"
			wfs_abstract "B5m code K"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end
	# 6. v_streets_axis
	layer
		name "v_streets_axis"
		type line
		status on
		connectiontype ogr
		connection "v_streets_axis.gpkg"
		data "v_streets_axis"
		template "empty"
		tolerance 30
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Kalea (ardatza) / Calle (eje) / Street (axis)"
			wfs_abstract "B5m code V"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 7. c_basins
	layer
		name "c_basins"
		type polygon
		status on
		connectiontype ogr
		connection "c_basins.gpkg"
		data "c_basins"
		template "empty"
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Arroa / Cuenca / Basin"
			wfs_abstract "B5m code C"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 8. i_hydrography
	layer
		name "i_hydrography"
		type line
		status on
		connectiontype ogr
		connection "i_hydrography.gpkg"
		data "i_hydrography"
		template "empty"
		tolerance 30
		toleranceunits meters
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Hidrografia / Hidrografía / Hydrography"
			wfs_abstract "B5m code I"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_exclude_items "idtopo"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 9. z_districts
	layer
		name "z_districts"
		type polygon
		status on
		connectiontype ogr
		connection "z_districts.gpkg"
		data "z_districts"
		template "empty"
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Auzo eta/edo hiri izena / Barrio y/o nombre urbano / District and/or urban name"
			wfs_abstract "B5m code Z"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 10. g_orography
	layer
		name "g_orography"
		type polygon
		status on
		connectiontype ogr
		connection "g_orography.gpkg"
		data "g_orography"
		template "empty"
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Orografiaren toponimia / Toponimia de la orografía / Toponymy of the orography"
			wfs_abstract "B5m code G"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 11. t_roads_railways
	layer
		name "t_roads_railways"
		type line
		status on
		connectiontype ogr
		connection "t_roads_railways.gpkg"
		data "t_roads_railways"
		template "empty"
		tolerance 30
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Errepidea eta trenbidea / Carretera y ferrocarril / Road and Railway"
			wfs_abstract "B5m code T"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 12. q_municipalcartography
	layer
		name "q_municipalcartography"
		type polygon
		status on
		connectiontype ogr
		connection "q_municipalcartography.gpkg"
		data "q_municipalcartography"
		template "empty"
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Udal kartografia / Cartografía municipal / Municipal Cartography"
			wfs_abstract "B5m code Q"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_exclude_items "id_levan"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 13. sg_geodeticbenchmarks
	layer
		name "sg_geodeticbenchmarks"
		type point
		status on
		connectiontype ogr
		connection "sg_geodeticbenchmarks.gpkg"
		data "sg_geodeticbenchmarks"
		template "empty"
		tolerance 30
		toleranceunits meters
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Seinale geodesikoa / Señal geodésica / Geodetic Benchmark"
			wfs_abstract "B5m code SG"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 14. em_megalithicsites

	# 15. gk_megaliths

	# 16. cv_speleology

	# 17. bi_biotopes

	# 18. poi_pointsofinterest
	layer
		name "poi_pointsofinterest"
		type point
		status on
		connectiontype ogr
		connection "poi_pointsofinterest.gpkg"
		data "poi_pointsofinterest"
		template "empty"
		tolerance 30
		toleranceunits meters
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Interesgunea / Punto de interés / Point of Interest"
			wfs_abstract "B5m code POI"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 19. dm_distancemunicipalities
	layer
		name "dm_distancemunicipalities"
		type line
		status on
		#connectiontype ogr
		#connection "dm_distancemunicipalities.gpkg"
		#data "dm_distancemunicipalities"
		connectiontype oraclespatial
		connection "b5mweb_25830/web+@bdet"
		#data "geom from gi_dm_distancem using srid 25830 version 10g"
		data "geom from gi_wfs_dm using srid 25830 version 10g"
		template "empty"
		tolerance 30
		toleranceunits meters
		#extent 356000 4613000 753000 4839000
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Udalerrien arteko distantzia / Distancia entre municipios / Distance Between Municipalities"
			wfs_abstract "B5m code DM"
			wfs_extent "356000 4613000 753000 4839000"
			wfs_geomtype "MultiLine"
			wms_include_items "all"
			gml_include_items "all"
			gml_exclude_items "idut"
			gml_b5mcode_alias "b5mcode"
			gml_codmuni1_alias "codmuni1"
			gml_muni1_eu_alias "muni1_eu"
			gml_muni1_es_alias "muni1_es"
			gml_muni1_fr_alias "muni1_fr"
			gml_codterm1_alias "codterm1"
			gml_term1_eu_alias "term1_eu"
			gml_term1_es_alias "term1_es"
			gml_term1_fr_alias "term1_fr"
			gml_id_area1_alias "id_area1"
			gml_codmuni2_alias "codmuni2"
			gml_muni2_eu_alias "muni2_eu"
			gml_muni2_es_alias "muni2_es"
			gml_muni2_fr_alias "muni2_fr"
			gml_codterm2_alias "codterm2"
			gml_term2_eu_alias "term2_eu"
			gml_term2_es_alias "term2_es"
			gml_term2_fr_alias "term2_fr"
			gml_id_area2_alias "id_area2"
			gml_idarea2_alias "idarea_2"
			gml_dist_r_alias "dist_r"
			gml_dist_c_alias "dist_c"
			gml_fecha_alias "dm_date"
			gml_official_alias "official"
			gml_geom_alias "geom"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 20. r_grid
	layer
		name "r_grid"
		type polygon
		status on
		connectiontype ogr
		connection "r_grid.gpkg"
		data "r_grid"
		template "empty"
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Lauki-sarea / Cuadrícula / Grid"
			wfs_abstract "B5m code R"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end

	# 21. dw_download
	layer
		name "dw_download"
		type polygon
		status on
		connectiontype union
		connection "dw_download_5,dw_download_1"
		processing "CLOSE_CONNECTION=DEFER"
		processing "ITEMS=b5mcode,name_grid_eu,name_grid_es,type_grid_eu,type_grid_es,type_grid_en,official,types_dw"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Deskargak / Descargas / Downloads"
			wfs_abstract "B5m code DW"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_exclude_items "fid,b5mcode2"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end
	layer
		name "dw_download_1"
		type polygon
		status on
		connectiontype ogr
		connection "dw_download.gpkg"
		data "dw_download_view_1"
		template "empty"
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Deskargak / Descargas / Downloads (1x1 km)"
			wfs_abstract "B5m code DW grid 1x1 km"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_exclude_items "fid,b5mcode2"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end
	layer
		name "dw_download_5"
		type polygon
		status on
		connectiontype ogr
		connection "dw_download.gpkg"
		data "dw_download_view_5"
		template "empty"
		processing "CLOSE_CONNECTION=DEFER"
		encoding "UTF-8"
		projection
			"init=epsg:25830"
		end
		class
			style
				outlinecolor 0 0 0
				color 120 120 120
			end
		end
		metadata
			wfs_title "Deskargak / Descargas / Downloads (5x5 km)"
			wfs_abstract "B5m code DW grid 5x5 km"
			wfs_extent "530000 4740000 610000 4820000"
			wms_include_items "all"
			gml_include_items "all"
			gml_exclude_items "fid,b5mcode2"
			gml_featureid "b5mcode"
			gml_types "auto"
			wfs_enable_request "*"
			wfs_use_default_extent_for_getfeature "false"
			ows_geomtype "Geometry"
		end
	end
end
